<form method="POST" action="{{ url_for('admin_bp.save_config_route') }}" id="slideshow-settings-form">
  <div class="card">
    <div class="card-header bg-primary bg-opacity-10">
      <h5 class="mb-0"><i class="bi bi-images"></i> Diavetítés Beállításai</h5>
    </div>
    <div class="card-body">
      <div class="mb-3 row">
        <label for="interval" class="col-sm-4 col-form-label">Képváltás sebessége</label>
        <div class="col-sm-8">
          <input type="number" class="form-control" id="interval" name="interval" min="1000" step="100" value="{{ config.slideshow.get('interval', 10000) }}">
          <span class="form-text">Ezredmásodpercben (ms).</span>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="transition_speed" class="col-sm-4 col-form-label">Áttűnés sebessége</label>
        <div class="col-sm-8">
          <input type="number" class="form-control" id="transition_speed" name="transition_speed" min="100" step="100" value="{{ config.slideshow.get('transition_speed', 1000) }}">
          <span class="form-text">Ezredmásodpercben (ms).</span>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="blur_strength" class="col-sm-4 col-form-label">Háttér elmosás</label>
        <div class="col-sm-8">
          <input type="range" class="form-range" id="blur_strength" name="blur_strength" min="0" max="50" value="{{ config.slideshow.get('blur_strength', 20) }}" oninput="this.nextElementSibling.value = this.value">
          <output class="ms-2">{{ config.slideshow.get('blur_strength', 20) }}</output>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="image_filter" class="col-sm-4 col-form-label">Kép CSS filter</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="image_filter" name="image_filter" value="{{ config.slideshow.get('image_filter','') }}">
          <div class="form-text">Pl: grayscale(0.2) brightness(1.1)</div>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="zoom_enabled" class="col-sm-4 col-form-label">Ken Burns (zoom) effekt</label>
        <div class="col-sm-8 d-flex align-items-center">
          <input class="form-check-input" type="checkbox" id="zoom_enabled" name="zoom_enabled" {% if config.slideshow.get('zoom_enabled', false) %}checked{% endif %}>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="zoom_duration" class="col-sm-4 col-form-label">Ken Burns időtartam</label>
        <div class="col-sm-8">
          <input type="number" class="form-control" id="zoom_duration" name="zoom_duration" min="1000" step="1000" value="{{ config.slideshow.get('zoom_duration', 30000) }}">
          <span class="form-text">Ezredmásodpercben (ms).</span>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="clock_size" class="col-sm-4 col-form-label">Óra méret</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="clock_size" name="clock_size" value="{{ config.slideshow.get('clock_size', '2.5rem') }}">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="enable_clock" class="col-sm-4 col-form-label">Óra megjelenítése</label>
        <div class="col-sm-8 d-flex align-items-center">
          <input class="form-check-input" type="checkbox" id="enable_clock" name="enable_clock" {% if config.slideshow.get('enable_clock', false) %}checked{% endif %}>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="birthday_boost" class="col-sm-4 col-form-label">Szülinapos kiemelés</label>
        <div class="col-sm-8 d-flex align-items-center">
          <input class="form-check-input" type="checkbox" id="birthday_boost" name="birthday_boost" {% if config.slideshow.get('birthday_boost', false) %}checked{% endif %}>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="randomize_playlist" class="col-sm-4 col-form-label">Véletlen sorrend</label>
        <div class="col-sm-8 d-flex align-items-center">
          <input class="form-check-input" type="checkbox" id="randomize_playlist" name="randomize_playlist" {% if config.slideshow.get('randomize_playlist', false) %}checked{% endif %}>
        </div>
      </div>
      <div class="mb-3 row">
        <label for="overlay_caption_enabled" class="col-sm-4 col-form-label">Felirat overlay</label>
        <div class="col-sm-8 d-flex align-items-center">
          <input class="form-check-input" type="checkbox" id="overlay_caption_enabled" name="overlay_caption_enabled" {% if config.slideshow.get('overlay_caption_enabled', false) %}checked{% endif %}>
        </div>
      </div>
      <div class="mb-3 row align-items-center">
        <label for="persons" class="col-sm-4 col-form-label">Címkézett személyek</label>
        <div class="col-sm-8">
          <select id="persons" name="persons" multiple></select>
          <small class="text-muted">Válassz személyt vagy kapcsold be a szülinapos módot!</small>
        </div>
      </div>
      <div class="mb-3 row align-items-center">
        <label class="col-sm-4 col-form-label" for="birthday_mode">Szülinapos mód</label>
        <div class="col-sm-8">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="birthday_mode" name="birthday_mode" {% if config.slideshow.get('birthday_mode', false) %}checked{% endif %}>
            <span class="form-text">Ha bekapcsolod, csak a mai szülinaposok képei jelennek meg (személyválasztás ekkor letiltva).</span>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end mt-4">
        <button type="submit" class="btn btn-primary px-4">
          <i class="bi bi-save"></i> Mentés
        </button>
      </div>
    </div>
  </div>
</form>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script>
  window.persons_list = {{ persons|tojson|safe }} || [];
  window.selected_persons = {{ config.slideshow.get('persons', [])|tojson|safe }};
</script>
<script src="{{ url_for('static', filename='tab_settings.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>